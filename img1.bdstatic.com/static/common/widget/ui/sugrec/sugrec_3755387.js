define("common:widget/ui/SugRec/SugRec",function(i){function o(i){this.options=s.extend(t,i||{}),this.kw=s("#kw")[0],1==s.cookie("HideSugRecommend")&&(this.options.display=!1);window.sugrecno=-1,this.pageName=this.options.page||"",this.pageQuery=this.options.query||"",this.sampleKey=this.options.samplekey||""}var s=i("common:widget/ui/base/base"),e=i("common:widget/ui/statistic/statistic"),t={container:'<div id="SugRecommend" ><div id="SugRecBox"><a class="sugTitle" id="hotwordlistinA" ></a><div id="SugContent"></div><a id="SugRecClose"></a></div></div>',display:!0};return s.extend(o.prototype,{init:function(i){var o=i||null,e=[];if(0!=o.length){o&&this.fomatData(i,e),s(document.body).append(this.options.container);var t=s("#sttb");t.after('<a class="sttb SugRecDisplay" title="点击查看热搜词" id="SugRecDisplay"><div id="SugRecShow"><div class="tips">想再次查看，请点击这里</div><div class="arrow" ></div></div></a>');var n=this;this.sug=s("#SugRecommend");var u=[];for(var c in e)u.push('<a class="sugline" data-name="sug" target="_blank" href="'+e[c].href+'" ><span class="no '+(3>c?"hot":"")+'" >'+(1*c+1)+'</span><span class="sugs" >'+e[c].text+"</span></a>");s("#SugContent").append(u.join("")),this._bindEvent(),0==this.options.display&&n.cookieHide(),this.sug.hide()}},fomatData:function(i,o){var s=i||{};for(var e in s)s[e].url&&(s[e].url=s[e].url.replace(/word=[^&]+/g,"word="+encodeURIComponent(s[e].query))),o.push({href:s[e].url.replace(/&fr=sugrec&[.*]+/g,"")+"&fr=sugrec&pos=history",text:s[e].flag||s[e].query})},overItem:function(i){s(i).addClass("sughover")},selectItem:function(){},keydown:function(i){if(!this.sug.is(":hidden")){var o=i.keyCode||i.which;if(13==o||38==o||40==o){var e=s(".sughover",this.sug);if(13==o){if(i.stopPropagation(i),i.preventDefault(i),e.length>0)return void setTimeout(function(){window.location.href=e[0].href},0)}else if(38==o)window.sugrecno--;else{if(40!=o)return;window.sugrecno++}this.kw.value="",window.sugrecno<0&&(window.sugrecno=0),window.sugrecno>9&&(window.sugrecno=9),e.length>0&&e.eq(0).removeClass("sughover"),this.overItem(s(".sugline",this.sug)[window.sugrecno])}}},enter:function(i){this.kw=i.target||i.srcElement,this.kw.value.length>0?this.sug&&this.close():this.render.call(this)},render:function(){"none"===this.sug.css("display")&&e&&e(null,1811103,{p:this.pageName,q:this.pageQuery,samplekey:this.sampleKey});var i=s(this.kw).offset(),o=this.options.offsetL||8,t=this.options.offsetT||4,n=this.options.width||453;this.sug.css("left",i.left-o+"px"),this.sug.css("top",i.top+this.kw.clientHeight+t+(s.browser.ie?-2:0)+"px"),this.sug.width(n),this.options.display&&this.sug.show()},update:function(i){this.options.width=i.width||this.options.width||453,this.sug.width(this.options.width)},close:function(){this.sug.hide(),window.sugrecno=-1},blur:function(){},cookieHide:function(i){this.options.display=!1,s.cookie("HideSugRecommend",1,{expires:7776e3}),s("#SugRecDisplay").css("display","block"),window.sugrecno=-1,i&&(s("#SugRecShow").css("display","block"),setTimeout(function(){s("#SugRecShow").css("display","none")},2300)),s("#sttb").addClass("sttbleft")},cookieShow:function(i){this.options.display=!0,s.cookie("HideSugRecommend",0,{expires:7776e3}),i&&i.stopPropagation(),this.kw.focus(),this.sug&&(this.render(),s("#SugRecommend").css("display","block")),s("#SugRecDisplay").css("display","none"),s("#sttb").removeClass("sttbleft")},_bindEvent:function(){{var i=this,o=s("#SugRecommend");s("#sttb")}s("#SugRecClose").on("click",function(o){i.close(o),i.cookieHide(!0)}),s("#SugRecDisplay").on("click",function(o){i.cookieShow(o)}),o.on("click",function(i){i.stopPropagation()}),s("#kw").on("mousedown",function(o){i.enter(o)}).on("keyup",function(o){i.enter(o)}).on("keydown",function(o){i.keydown(o)}).parent().on("click",function(i){i.stopPropagation()});var e=s("#kw3");e.length>0&&e.on("mousedown",function(o){i.enter(o)}).on("keyup",function(o){i.enter(o)}).on("keydown",function(o){i.keydown(o)}).parent().on("click",function(i){i.stopPropagation(i)}),s(document.body).on("click",function(o){i.close(o)}),s(window).on("scroll",function(o){i.close(o)});s(".sugline",this.sug).on("mouseout",function(){s(this).removeClass("sughover"),window.sugrecno=-1}).on("mouseover",function(){s(this).addClass("sughover"),window.sugrecno=0})}}),o});