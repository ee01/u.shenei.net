define("common:widget/ui/slider/slider",function(t,i,s){function e(t,i,s,e){var n=this;this.$el=t,this.$cnt,this.$slideCnt,this.duration=e.duration,this.isCycle=e.isCycle,this.curIdx=0,this.slideWidth=this.$el.width(),this.slidesNum=i.length,this.autoAnimateInterval=e.autoAnimateInterval||5e3,this.autoTurning=s,this.isAutoWidth=e.isAutoWidth,this._leftBtnClickHandler=function(t){t.preventDefault(),n.turnLeft()},this._rightBtnClickHandler=function(t){t.preventDefault(),n.turnRight()},this._animationFinish=function(){n.isAnimating=!1},this._autoTurning=function(){n._timer=null,n.turnRight(),n.startAutoAnimation()},this._mouseEnterHandler=function(){n.stopAutoAnimation()},this._mouseLeaveHandler=function(){n.startAutoAnimation()},this.realIdx=0,i.addClass("slide-show-ctn"),this._buildContainer(i),i=null,s&&this.startAutoAnimation()}var n=t("common:widget/ui/base/base"),h=t("common:widget/ui/EventEmitter/EventEmitter").eventCenter;n.extend(e.prototype,{_buildContainer:function(t){this.$slides=t,this.$el.append('<div class="mod-slide-show"><div class="cnt"></div></div>'),this.$cnt=this.$el.find("div.cnt"),this.$slideCnt=this.$el.find("div.mod-slide-show"),this.$cnt.width(this.slideWidth*this.slidesNum),this.autoTurning&&(this.$el.bind("mouseenter",this._mouseEnterHandler),this.$el.bind("mouseleave",this._mouseLeaveHandler)),t.appendTo(this.$cnt)},_moveSlide:function(t,i){var s={first:"prepend",last:"append"};this.$cnt[s[t]](i)},_moveFirstSlideToLast:function(){this._moveSlide("last",this.$cnt.children(":first")),this.curIdx--,this.$slideCnt[0].scrollLeft=this.slideWidth*this.curIdx},_moveLastSlideToFirst:function(){this._moveSlide("first",this.$cnt.children(":last")),this.curIdx++,this.$slideCnt[0].scrollLeft=this.slideWidth*this.curIdx},turnLeft:function(){if(this.isAnimating)return this;if(0==this.curIdx){if(!this.isCycle)return;this._moveLastSlideToFirst()}return this.slideWidth=this.isAutoWidth?this.$slides.eq(this.curIdx).width():this.slideWidth,this._animate("left"),this.curIdx--,this.realIdx--,this.realIdx<0&&(this.realIdx=this.slidesNum-1),h.trigger("slideMoved",{realIdx:this.realIdx}),this},turnRight:function(){var t;if(this.isAnimating)return this;if(this.curIdx==this.slidesNum-1){if(!this.isCycle)return;this._moveFirstSlideToLast()}return this.slideWidth=this.isAutoWidth?this.$slides.eq(this.curIdx+1).width():this.slideWidth,t=this._animate("right"),this.curIdx++,this.realIdx++,this.realIdx>=this.slidesNum&&(this.realIdx=0),h.trigger("slideMoved",{realIdx:this.realIdx}),this},_animate:function(t){var i={left:"-=",right:"+="};return this.isAnimating=!0,this.stopAutoAnimation(),this.$slideCnt.animate({scrollLeft:i[t]+this.slideWidth},this.duration,this._animationFinish)},setBtns:function(t,i){t.bind("click",this._leftBtnClickHandler),i.bind("click",this._rightBtnClickHandler)},startAutoAnimation:function(){this.autoTurning&&(this._timer||(this._timer=setTimeout(this._autoTurning,this.autoAnimateInterval)))},stopAutoAnimation:function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},updateContentWidth:function(){return this.stopAutoAnimation(),this.isAnimating?void setTimeout(this.updateContentWidth.bind(this),this.duration):(this.slideWidth=this.$el.width(),this.$cnt.width(this.slideWidth*this.slidesNum),this.$slideCnt[0].scrollLeft=this.curIdx*this.slideWidth,void this.startAutoAnimation())}}),s.exports={init:function(t,i,s){var h,d,r,l,o=n(t),u=n(i),a={leftBtnSel:".slide-left-btn",rightBtnSel:".slide-right-btn",autoAnimate:!0,duration:800,isCycle:!0,isAutoWidth:!1};return!o.length||u.length<1?(l=new Function,{updateContentWidth:l,stopAutoAnimation:l,startAutoAnimation:l,setBtns:l,turnRight:l,turnLeft:l,addEventListener:l,removeEventListener:l}):(n.extend(a,s),h=n(a.leftBtnSel),d=n(a.rightBtnSel),r=new e(o,u,a.autoAnimate,{duration:a.duration,isCycle:a.isCycle,isAutoWidth:a.isAutoWidth}),h.length&&d.length&&r.setBtns(h,d),r)}}});