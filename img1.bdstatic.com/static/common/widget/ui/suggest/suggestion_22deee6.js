define("common:widget/ui/suggest/suggestion",function(t){var i=t("common:widget/ui/base/base"),e=t("common:widget/ui/base/events"),n=t("common:widget/ui/suggest/data"),s=t("common:widget/ui/suggest/inputwatcher"),u=t("common:widget/ui/suggest/suggestionlist"),o=function(t){if(!t)throw new Error("Suggestion 构造函数必须传递input元素的DOM！");this.data=new n({urlPre:t.urlPre}),this.inputWatcher=new s({el:i(t.el)}),this.sugList=new u({maxNumber:t.maxNumber||10,id:t.id,tpl:t.tpl,parentElement:t.parentElement,newStyle:t.newStyle}),this.$form=i(t.formElement),this._setupEvent()};return i.extend(o.prototype,e,{_setupEvent:function(){var t=this;this.data.on("data.ready",function(i){t.sugList.render(i.data)}),this.data.on("data.empty",function(){t.sugList.render([])}),this.inputWatcher.on("key.up",function(){t.sugList.backward()}),this.inputWatcher.on("key.down",function(){t.sugList.forward()}),this.inputWatcher.on("key.enter",function(i){t.submit(i)}),this.inputWatcher.on("change",function(i){t.data.getData(i.value)}),this.sugList.on("item.click",function(i){t.inputWatcher.setValue(i.value),t.submit(i)}),this.sugList.on("item.switch",function(i){var e;e=i&&i.value?i.value:t.inputWatcher.getOriginValue(),t.inputWatcher.setValue(e)}),i(document).on("dragover",function(){t.hide()})},submit:function(){var t=this.$form[0],i=this.inputWatcher.getValue(),e=this.inputWatcher.getOriginValue(),n=this.sugList.getIndex();t.onsubmit&&t.onsubmit()===!1||(this.trigger("beforesubmit",{form:this.$form[0],value:i,originValue:e,index:n}),t.submit())},css:function(t){return this.sugList.css(t),this},show:function(){return this.sugList.show(),this},hide:function(){return this.sugList.hide(),this}}),o});