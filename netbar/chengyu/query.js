function fIdiomQuery(){var queryValue=$("searchInput").value,url="http://assistant.mail.yeah.net/assistant/chengyu.do?op=search";fYodaoCall(url,"fCallBack","&keyword="+queryValue,"&extend={'type':'id','value':'"+queryValue+"'}");return false;};function fYodaoCall(sUrl,sEvent,sParams,sExtend,sCharSet){sUrl+="&event="+sEvent;if(sParams){sUrl+=sParams;};if(sExtend){sUrl+=sExtend;};sUrl+="&fromMailMusic&patch="+Date.parse(new Date());fCommonGetScript(sUrl,"gbk");};function fCallBack(nCode,oJson,oExtend){if(nCode>=0){fShowResult(oJson,oExtend)}else{document.getElementById("resultDiv").style.display="";document.getElementById("queryDiv").style.display="none";document.getElementById("showDiv").innerHTML="对不起，查询失败，请稍后重试";};};function fShowResult(oJson,oExtend){var nLength=oJson.length,sHtml='<table class="Cont_table" cellspacing="0" cellpadding="0">';for(var i=0;i<nLength;i++){if((i+1)%5==1){sHtml+="<tr>";};var sKey=encodeURI(oExtend.value);sHtml+='<td><a href="detail.htm#t='+oJson[i].id+'&key='+sKey+'">'+oJson[i].word+'</a></td>';if((i+1)%5==0){sHtml+="</tr>";};if((i+1)%25==0){sHtml+='<tr><td colspan="6" style="border-bottom-width:0px">&nbsp;</td></tr>';};};if(i%5>0){for(var j=0;j<5-(i%5);j++){sHtml+="<td>&nbsp;</td>";};sHtml+="</tr>";};sHtml+="</table>";if(nLength==0){sHtml="对不起，没有查询到“<b>"+oExtend.value+"</b>”相关的成语";};document.getElementById("resultDiv").style.display="";document.getElementById("queryDiv").style.display="none";document.getElementById("showDiv").innerHTML=sHtml;};function fInit(){var sUrl=location.hash,oReq=new Object();if(sUrl.indexOf("#")!=-1){var str=sUrl.substr(1);strs=str.split("&");for(var i=0;i<strs.length;i++){oReq[strs[i].split("=")[0]]=strs[i].split("=")[1];};};var sKey=oReq["key"];if(sKey){sKey=decodeURI(sKey);$("searchInput").value=sKey;fIdiomQuery(sKey);};};
