<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><!-- saved from url=(0048)http://u.shenei.net/space-1-do-blog-id-1211.html --><meta http-equiv="X-UA-Compatible" content="IE=Edge" />

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="content-type" content="text/html; charset=gbk" />
<meta http-equiv="x-ua-compatible" content="ie=7" />
<title>基于PECL OAuth打造微博应用 - 日志 - 小E←邱沼懿 - 【舍内网】 - 福州大学城最火爆的时尚交友互动平台！交友、游戏、学习、时尚一个不漏！</title>
<meta name="keywords" content="舍内网,舍内交友,舍内资讯,舍内人,舍内市,同城交友,fzxyw,舍内时尚,舍内时尚,舍内女人,舍内妈妈宝宝" />
<meta name="description" content="舍内网是福州大学城最火爆的交友互动网站！为福州大学城提供一个网络交友、网络学习、游戏娱乐、消磨无聊时间的一个互动平台，在这里！你可以结识到更多的朋友，商家可以在这里找到更多的客户！我们期待你的加入！" />
<meta name="generator" content="shenei.net" />
<meta name="author" content="shenei.net" />
<meta name="copyright" content="2009-2010 shenei.net" />
<script language="javascript" type="text/javascript" src="../source/script_cookie.js"></script>
<script language="javascript" type="text/javascript" src="../source/script_common.js"></script>
<script language="javascript" type="text/javascript" src="../source/script_menu.js"></script>
<script language="javascript" type="text/javascript" src="../source/script_ajax.js"></script>
<script language="javascript" type="text/javascript" src="../source/script_face.js"></script>
<script language="javascript" type="text/javascript" src="../source/script_manage.js"></script>
<script type="text/javascript" src="../js/suggestframework.js"></script>
<script type="text/javascript">window.onload = initializeSuggestFramework;</script>
<style type="text/css">
@import url(../template/default/musicboxstyle.css);
</style>
<style type="text/css">
@import url(../template/default/style.css);
@import url(../template/vicstyle4/vicstyle4.css);
@import url(../template/default/blog.css);
@import url(../template/vicstyle4/style.css);
</style>
<link rel="shortcut icon" href="../image/favicon.ico" />
<link rel="edituri" type="application/rsd+xml" title="rsd" href="../xmlrpc.phprsd1" />
</head>
<body>

<div id="append_parent"></div>
<div id="ajaxwaitid"></div>
<div id="header">
<div class="headerwarp">
<h1 class="logo" ><a href="../index.php.htm"><img src="../template/vicstyle4/image/logo.gif" alt="舍内网" /></a></h1>
<ul id="vs4_nav" >

<li class="vs4_dropmenu" id="navhead_v2" onmouseover="showMenu(this.id)"><a href="javascript:;">站点导航</a></li>
<li class="vs4_dropmenu" id="navhead_v1" onmouseover="showMenu(this.id)"><a href="javascript:;" style="color:#FFf;background-image: url(../template/vicstyle4/image/hdnav_bg.gif); background-repeat: no-repeat;background-position: center;">个人设置</a></li>
<li class="vs4_dropmenu" id="navhead_v3" onmouseover="showMenu(this.id)"><a href="javascript:;">社区服务</a></li>
<li><a href="../space-pm.html" style="display: block; width: 80px;">消息</a></li>
</ul>	
<ul id="navhead_v1_menu" class="vs4_dropmenu_drop" style="display:none;text-align:center;">
<li><a href="space-home.html">个人中心</a></li>
<li><a href="../cp.phpacavatar.htm">我的头像</a></li>
<li><a href="../cp.phpacprofile.htm">个人资料</a></li>
<li><a href="../cp.phpactheme.htm">主页风格</a></li>
<li><a href="../cp.phpaccredit.htm">我的积分</a></li>
<li><a href="../space-friend.html">我的好友</a></li>	
<li><a href="../cp.phpacsendmail.htm">邮件提醒</a></li>
<li><a href="../cp.phpacprivacy.htm">隐私筛选</a></li>
<li><a href="../admincp.php.htm">站点管理</a></li>
<li><a href="../do.phpacstat.htm">趋势统计</a></li>
</ul>
<ul id="navhead_v2_menu" class="vs4_dropmenu_drop" style="display:none;text-align:center;">
<li><a href="../index.php.htm">首页</a></li>
<li><a href="../network.html" target="_blank">广场</a></li>
<li><a href="../space-top.html">排行</a></li>
<li><a href="floor.php.htm">抢楼</a></li>
<li><a href="sohovicstyle.php.htm">潮人</a></li>
<li><a href="space-sys.html">论坛</a></li>
<li><a href="../space-thread.html">圈子</a></li>
</ul>
<ul id="navhead_v3_menu" class="vs4_dropmenu_drop" style="display:none;text-align:center;">
<li><a href="../cp.phpacuserapp.htm">娱乐游戏</a></li>
<li><a href="../cp.phpacmagic.htm">道具中心</a></li>
<li><a href="../cp.phpactask.htm">任务系统</a></li>
<li><a href="../help.php.htm">HELP帮助</a></li>
</ul>
<div class="vs4_account" >
<a href="../space-1.html" class="loginName">小E←邱沼懿</a>
<a href="../pay.phpacvip.htm" target="_blank"><img src="../image/pay/vip2.gif" title="未激活" border="0" align="absmiddle" /></a>
<a href="../cp.phpaccredit.htm" style="font-size:11px;padding:0 0 0 5px;">7183 <img src="../image/credit.gif"></a>
<a href="../exchange.php.htm">兑换</a> 
<a href="../cp.phpacinvite.htm">邀请</a> 
<a href="../cp.phpactask.htm">任务</a> 
<a href="../cp.phpacmagic.htm">道具</a>
<a href="../cp.php.htm">设置</a> 
<a href="../cp.phpaccommonoplogoutuhash25b100948615bc2337af393d6e07d571">退出</a>
</div>
</div>
</div>
<div id="wrap">
<div id="vs4_headmain"></div>
<div id="vs4_main">
<div id="vs4_toolsbar">
<ul>&nbsp;工具菜单</ul>
<ul class="vs4_toollist topline" id="default_userapp">
<li><div class="hidemsg"><div class="hidemain"><span>个人中心</span></p><a href="space-home.html">进入</a></div></div><a href="space-home.html"><img src="../image/app/app_sidebar_home.gif"></a></li>
<li><div class="hidemsg"><div class="hidemain"><span>我的BLOG</span></p><a href="../space.html">进入</a></div></div><a href="../space.html"><img src="../image/app/app_sidebar_blog.gif"></a></li>
<li><div class="hidemsg"><div class="hidemain"><span>我的心情</span></p><a href="../space-doing.html">进入</a>&nbsp;&nbsp;<a href="../ana.php.htm">语录</a></div></div><a href="../space-doing.html"><img src="../image/app/app_sidebar_xq.gif"></a></li>
<li><div class="hidemsg"><div class="hidemain"><span>我的日志</span></p><a href="space-blog.html">进入</a>&nbsp;&nbsp;<a href="../cp.phpacblog.htm">发表</a></div></div><a href="space-blog.html" ><img src="../image/app/app_sidebar_rz.gif"></a></li>
<li><div class="hidemsg"><div class="hidemain"><span>我的相册</span></p><a href="../space-album.html">进入</a>&nbsp;&nbsp;<a href="../cp.phpacupload.htm">上传</a></div></div><a href="../space-album.html"><img src="../image/app/app_sidebar_xc.gif"></a></li>
<li><div class="hidemsg"><div class="hidemain"><span>我的音乐</span></p><a href="../space-musicbox.html">进入</a>&nbsp;&nbsp;<a href="../space-musicbox-mview-commend.html">推荐</a></div></div><a href="../space-musicbox.html" ><img src="../image/app/app_sidebar_music.gif"></a></li>
<li><div class="hidemsg"><div class="hidemain"><span>我的网盘</span></p><a href="../nd_upload.php.htm">进入</a>&nbsp;&nbsp;<a href="../nd_upload.phpdoadd.htm">共享</a></div></div><a href="../nd_upload.php.htm" ><img src="../image/app/app_sidebar_disk.gif"></a></li>
<li><div class="hidemsg"><div class="hidemain"><span>我的群组</span></p><a href="../space-mtag.html">进入</a>&nbsp;&nbsp;<a href="../cp.phpacthread.htm" class="gray">话题</a></div></div><a href="../space-mtag.html"><img src="../image/app/app_sidebar_qz.gif"></a></li>
<li><div class="hidemsg"><div class="hidemain"><span>我的分享</span></p><a href="../space-share.html">进入</a></div></div><a href="../space-share.html"><img src="../image/app/app_sidebar_fx.gif"></a></li>
<li><div class="hidemsg"><div class="hidemain"><span>我的飞信</span></p><a href="../cp.phpacfetion.htm">进入</a>&nbsp;&nbsp;<a href="../fetion.php.htm">速发</a></div></div><a href="../cp.phpacfetion.htm"><img src="../image/app/app_sidebar_fetion.gif"></a></li>
<li><div class="hidemsg"><div class="hidemain"><span>我的城市</span></p><a href="../city.php.htm">进入</a>&nbsp;&nbsp;<a href="../cp.phpacprofileopcontact.htm">标记</a></div></div><a href="../city.php.htm" ><img src="../image/app/app_sidebar_city.gif"></a></li>
<li><div class="hidemsg"><div class="hidemain"><span>我的天空</span></p><a href="../sky.php.htm">进入</a>&nbsp;&nbsp;<a href=../../sky.shenei.net/default.htm target="_blank">全景</a></div></div><a href="../sky.php.htm" ><img src="../image/app/app_sidebar_sky.gif"></a></li>
<li><div class="hidemsg"><div class="hidemain"><span>我的投票</span></p><a href="../space-poll.html">进入</a>&nbsp;&nbsp;<a href="../cp.phpacpoll.htm" class="gray">发起</a></div></div><a href="../space-poll.html"><img src="../image/app/app_sidebar_tp.gif"></a></li>
<li><div class="hidemsg"><div class="hidemain"><span>我的活动</span></p><a href="../space-event.html">进入</a>&nbsp;&nbsp;<a href="../cp.phpacevent.htm" class="gray">发起</a></div></div><a href="../space-event.html"><img src="../image/app/app_sidebar_hd.gif"></a></li>
<li><div class="hidemsg"><div class="hidemain"><span>我的热闹</span></p><a href="../space-topic.html">进入</a></div></div><a href="../space-topic.html"><img src="../image/app/app_sidebar_rn.gif"></a></li>
<li><div class="hidemsg"><div class="hidemain"><span>手机网址</span></p><a href=../../wap.shenei.net/default.htm target=_blank>进入</a>&nbsp;&nbsp;<a title=复制地址 onclick="javascript:setCopy('../wap.shenei.net');" href="javascript:;">复制</a></div></div><a href=../../wap.shenei.net/default.htm target=_blank ><img src="../image/app/app_sidebar_mobile.gif"></a></li>
<li><div class="hidemsg"><div class="hidemain"><span>我的应用</span></p><a href="../cp.phpacuserappopmenu.htm">进入</a>&nbsp;&nbsp;<a href="../cp.phpacuserappmy_suffix_252fapp_252flist.htm">添加</a></div></div><a href="../cp.phpacuserappopmenu.htm"><img src="../image/app/app_sidebar_yy.gif"></a></li>
</ul>
<ul class="topline">&nbsp;默认应用</ul>
<ul class="vs4_gamelist topline" id="my_defaultapp">

<li><a href="../userapp.phpid1029889my_suffixlw_253d_253d.htm" title="开心宝贝"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2ficons~1.gif"></a></li>
<li><a href="../userapp.phpid1039242my_suffixlw_253d_253d.htm" title="幸福厨房"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2ficon~2.gif"></a></li>
<li><a href="../userapp.phpid1050925my_suffixlw_253d_253d.htm" title="快来挖Wa"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2ficon~3.gif"></a></li>
<li><a href="../userapp.phpid1053021my_suffixlw_253d_253d.htm" title="太空时代"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2ficon~4.gif"></a></li>
<li><a href="../userapp.phpid1003274my_suffixlw_253d_253d.htm" title="读书"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2ficon~5.gif"></a></li>
<li><a href="../userapp.phpid1025455my_suffixlw_253d_253d.htm" title="斗牛场"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2ficon~6.gif"></a></li>
	
</ul>

<ul class="topline">&nbsp;我的应用</ul>
<ul class="vs4_gamelist topline" id="my_userapp">

<li id="userapp_li_1004186"><a href="../userapp.phpid1004186my_suffixlw_253d_253d.htm" title="朋友买卖"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2ficon~7.gif"></a></li>
<li id="userapp_li_1021978"><a href="../userapp.phpid1021978my_suffixlw_253d_253d.htm" title="开心农场"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2ficon~8.gif"></a></li>
<li id="userapp_li_1025246"><a href="../userapp.phpid1025246my_suffixlw_253d_253d.htm" title="狗狗"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2ficon~9.gif"></a></li>
<li id="userapp_li_1003094"><a href="../userapp.phpid1003094my_suffixlw_253d_253d.htm" title="争车位"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~10.gif"></a></li>
<li id="userapp_li_1036999"><a href="../userapp.phpid1036999my_suffixlw_253d_253d.htm" title="疯狂办公室"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~11.gif"></a></li>
<li id="userapp_li_1006588"><a href="../userapp.phpid1006588my_suffixlw_253d_253d.htm" title="挖金子"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~12.gif"></a></li>
<li id="userapp_li_1048438"><a href="../userapp.phpid1048438my_suffixlw_253d_253d.htm" title="海底总动员"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~13.gif"></a></li>
<li id="userapp_li_1033526"><a href="../userapp.phpid1033526my_suffixlw_253d_253d.htm" title="荣光医院"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~14.gif"></a></li>
<li id="userapp_li_1035333"><a href="../userapp.phpid1035333my_suffixlw_253d_253d.htm" title="开心动物园"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~15.gif"></a></li>
<li id="userapp_li_1040698"><a href="../userapp.phpid1040698my_suffixlw_253d_253d.htm" title="奇妙猪世界"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~16.gif"></a></li>
<li id="userapp_li_1033482"><a href="../userapp.phpid1033482my_suffixlw_253d_253d.htm" title="音乐DNA"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~17.gif"></a></li>
<li id="userapp_li_1036269"><a href="../userapp.phpid1036269my_suffixlw_253d_253d.htm" title="心跳1419"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~18.gif"></a></li>
<li id="userapp_li_1010227"><a href="../userapp.phpid1010227my_suffixlw_253d_253d.htm" title="魔法斗地主"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~19.gif"></a></li>
<li id="userapp_li_1040890"><a href="../userapp.phpid1040890my_suffixlw_253d_253d.htm" title="楼一幢"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~20.gif"></a></li>
<li id="userapp_li_1013309"><a href="../userapp.phpid1013309my_suffixlw_253d_253d.htm" title="游戏厅"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~21.gif"></a></li>
<li id="userapp_li_1011595"><a href="../userapp.phpid1011595my_suffixlw_253d_253d.htm" title="赛车总动员"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~22.gif"></a></li>
<li id="userapp_li_1010474"><a href="../userapp.phpid1010474my_suffixlw_253d_253d.htm" title="猫鼠大作战"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~23.gif"></a></li>
<li id="userapp_li_1028245"><a href="../userapp.phpid1028245my_suffixlw_253d_253d.htm" title="开心斗地主"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~24.gif"></a></li>
<li id="userapp_li_1006097"><a href="../userapp.phpid1006097my_suffixlw_253d_253d.htm" title="电Ta一下"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~25.gif"></a></li>
<li id="userapp_li_1000043"><a href="../userapp.phpid1000043my_suffixlw_253d_253d.htm" title="电影"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~26.gif"></a></li>
<li id="userapp_li_1013913"><a href="../userapp.phpid1013913my_suffixlw_253d_253d.htm" title="朋友比较"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~27.gif"></a></li>
<li id="userapp_li_1005122"><a href="../userapp.phpid1005122my_suffixlw_253d_253d.htm" title="德克萨斯扑克游戏"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~28.gif"></a></li>
<li id="userapp_li_1012215"><a href="../userapp.phpid1012215my_suffixlw_253d_253d.htm" title="酷狗音乐盒"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~29.gif"></a></li>
<li id="userapp_li_1002972"><a href="../userapp.phpid1002972my_suffixlw_253d_253d.htm" title="QQ聊天室"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~30.gif"></a></li>
<li id="userapp_li_1022890"><a href="../userapp.phpid1022890my_suffixlw_253d_253d.htm" title="浪漫公寓"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~31.gif"></a></li>
<li id="userapp_li_1018750"><a href="../userapp.phpid1018750my_suffixlw_253d_253d.htm" title="斗鸡"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~32.gif"></a></li>
<li id="userapp_li_1021701"><a href="../userapp.phpid1021701my_suffixlw_253d_253d.htm" title="零距离邮筒"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~33.gif"></a></li>
<li id="userapp_li_1018840"><a href="../userapp.phpid1018840my_suffixlw_253d_253d.htm" title="祖玛"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~34.gif"></a></li>
<li id="userapp_li_1006752"><a href="../userapp.phpid1006752my_suffixlw_253d_253d.htm" title="疯狂出租车"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~35.gif"></a></li>
<li id="userapp_li_1028802"><a href="../userapp.phpid1028802my_suffixlw_253d_253d.htm" title="天下名片"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~36.gif"></a></li>
<li id="userapp_li_1007292"><a href="../userapp.phpid1007292my_suffixlw_253d_253d.htm" title="超级玛丽"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~37.gif"></a></li>
<li id="userapp_li_1012923"><a href="../userapp.phpid1012923my_suffixlw_253d_253d.htm" title="我印我秀"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~38.gif"></a></li>
<li id="userapp_li_1002898"><a href="../userapp.phpid1002898my_suffixlw_253d_253d.htm" title="谁请客吃冰激淋"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~39.gif"></a></li>
<li id="userapp_li_1021692"><a href="../userapp.phpid1021692my_suffixlw_253d_253d.htm" title="福彩3D"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~40.gif"></a></li>
<li id="userapp_li_1030248"><a href="../userapp.phpid1030248my_suffixlw_253d_253d.htm" title="VV斗地主"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~41.gif"></a></li>
<li id="userapp_li_1027468"><a href="../userapp.phpid1027468my_suffixlw_253d_253d.htm" title="礼物"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~42.gif"></a></li>
<li id="userapp_li_1005209"><a href="../userapp.phpid1005209my_suffixlw_253d_253d.htm" title="网上帐本"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~43.gif"></a></li>
<li id="userapp_li_1004755"><a href="../userapp.phpid1004755my_suffixlw_253d_253d.htm" title="喜欢我吗"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~44.gif"></a></li>
<li id="userapp_li_1034851"><a href="../userapp.phpid1034851my_suffixlw_253d_253d.htm" title="欢乐卡片"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~45.gif"></a></li>
<li id="userapp_li_1030888"><a href="../userapp.phpid1030888my_suffixlw_253d_253d.htm" title="网页游戏"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~46.gif"></a></li>
<li id="userapp_li_1006410"><a href="../userapp.phpid1006410my_suffixlw_253d_253d.htm" title="56动感相册"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~47.gif"></a></li>
<li id="userapp_li_1002711"><a href="../userapp.phpid1002711my_suffixlw_253d_253d.htm" title="礼品店"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~48.gif"></a></li>
<li id="userapp_li_1025627"><a href="../userapp.phpid1025627my_suffixlw_253d_253d.htm" title="开心恋床"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~49.gif"></a></li>
<li id="userapp_li_1008973"><a href="../userapp.phpid1008973my_suffixlw_253d_253d.htm" title="朋友印象"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~50.gif"></a></li>
<li id="userapp_li_1026002"><a href="../userapp.phpid1026002my_suffixlw_253d_253d.htm" title="天黑请闭眼2.0"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~51.gif"></a></li>
<li id="userapp_li_1011587"><a href="../userapp.phpid1011587my_suffixlw_253d_253d.htm" title="人肉炸弹"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~52.gif"></a></li>
<li id="userapp_li_1025054"><a href="../userapp.phpid1025054my_suffixlw_253d_253d.htm" title="可爱卡丁车"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~53.gif"></a></li>
<li id="userapp_li_1033960"><a href="../userapp.phpid1033960my_suffixlw_253d_253d.htm" title="闪亮健身"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~54.gif"></a></li>
<li id="userapp_li_1036304"><a href="../userapp.phpid1036304my_suffixlw_253d_253d.htm" title="幸运棋牌"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~55.gif"></a></li>
<li id="userapp_li_1016054"><a href="../userapp.phpid1016054my_suffixlw_253d_253d.htm" title="礼物大派送"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~56.gif"></a></li>
<li id="userapp_li_1002602"><a href="../userapp.phpid1002602my_suffixlw_253d_253d.htm" title="心理测试"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~57.gif"></a></li>
<li id="userapp_li_1006771"><a href="../userapp.phpid1006771my_suffixlw_253d_253d.htm" title="我快要疯了！"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~58.gif"></a></li>
<li id="userapp_li_1044189"><a href="../userapp.phpid1044189my_suffixlw_253d_253d.htm" title="快打旋风"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~59.gif"></a></li>
<li id="userapp_li_1047370"><a href="../userapp.phpid1047370my_suffixlw_253d_253d.htm" title="地产大亨"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~60.gif"></a></li>
<li id="userapp_li_1024392"><a href="../userapp.phpid1024392my_suffixlw_253d_253d.htm" title="音乐推荐"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~61.gif"></a></li>
<li id="userapp_li_1054378"><a href="../userapp.phpid1054378my_suffixlw_253d_253d.htm" title="庄园时代"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~62.gif"></a></li>
<li id="userapp_li_1048307"><a href="../userapp.phpid1048307my_suffixlw_253d_253d.htm" title="有间客栈"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~63.gif"></a></li>
<li id="userapp_li_1043066"><a href="../userapp.phpid1043066my_suffixlw_253d_253d.htm" title="本草仙目"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~64.gif"></a></li>
<li id="userapp_li_1044490"><a href="../userapp.phpid1044490my_suffixlw_253d_253d.htm" title="三十六计"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~65.gif"></a></li>
<li id="userapp_li_1044822"><a href="../userapp.phpid1044822my_suffixlw_253d_253d.htm" title="私人博物馆"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~66.gif"></a></li>
<li id="userapp_li_1041209"><a href="../userapp.phpid1041209my_suffixlw_253d_253d.htm" title="开心测试"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~67.gif"></a></li>
<li id="userapp_li_1040657"><a href="../userapp.phpid1040657my_suffixlw_253d_253d.htm" title="夜店大亨"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~68.gif"></a></li>
<li id="userapp_li_1038206"><a href="../userapp.phpid1038206my_suffixlw_253d_253d.htm" title="摩天城"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~69.gif"></a></li>
<li id="userapp_li_1007832"><a href="../userapp.phpid1007832my_suffixlw_253d_253d.htm" title="有事就问吧"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~70.gif"></a></li>
<li id="userapp_li_1052447"><a href="../userapp.phpid1052447my_suffixlw_253d_253d.htm" title="欢乐鱼塘"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~71.gif"></a></li>
<li id="userapp_li_1058319"><a href="../userapp.phpid1058319my_suffixlw_253d_253d.htm" title="棒子老虎鸡"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~72.gif"></a></li>
<li id="userapp_li_1018233"><a href="../userapp.phpid1018233my_suffixlw_253d_253d.htm" title="山寨股市"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~73.gif"></a></li>
<li id="userapp_li_1060932"><a href="../userapp.phpid1060932my_suffixlw_253d_253d.htm" title="十年一剑"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~74.gif"></a></li>
<li id="userapp_li_1058412"><a href="../userapp.phpid1058412my_suffixlw_253d_253d.htm" title="热血球球"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~75.gif"></a></li>
<li id="userapp_li_1058701"><a href="../userapp.phpid1058701my_suffixlw_253d_253d.htm" title="坦克大战"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~76.gif"></a></li>
<li id="userapp_li_1055082"><a href="../userapp.phpid1055082my_suffixlw_253d_253d.htm" title="知己人生"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~77.gif"></a></li>
<li id="userapp_li_1059373"><a href="../userapp.phpid1059373my_suffixlw_253d_253d.htm" title="忍者村"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~78.gif"></a></li>
<li id="userapp_li_1059430"><a href="../userapp.phpid1059430my_suffixlw_253d_253d.htm" title="枪王之王"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~79.gif"></a></li>
<li id="userapp_li_1058035"><a href="../userapp.phpid1058035my_suffixlw_253d_253d.htm" title="汽车工厂"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~80.gif"></a></li>
<li id="userapp_li_1045165"><a href="../userapp.phpid1045165my_suffixlw_253d_253d.htm" title="第7扑克"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~81.gif"></a></li>
<li id="userapp_li_1056730"><a href="../userapp.phpid1056730my_suffixlw_253d_253d.htm" title="爆破方块"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~82.gif"></a></li>
<li id="userapp_li_1054345"><a href="../userapp.phpid1054345my_suffixlw_253d_253d.htm" title="果果帮"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~83.gif"></a></li>
<li id="userapp_li_1055802"><a href="../userapp.phpid1055802my_suffixlw_253d_253d.htm" title="天天向上"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~84.gif"></a></li>
<li id="userapp_li_1057497"><a href="../userapp.phpid1057497my_suffixlw_253d_253d.htm" title="开心团购"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~85.gif"></a></li>
<li id="userapp_li_1055989"><a href="../userapp.phpid1055989my_suffixlw_253d_253d.htm" title="社区城市"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~86.gif"></a></li>
<li id="userapp_li_1056190"><a href="../userapp.phpid1056190my_suffixlw_253d_253d.htm" title="运镖天下"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~87.gif"></a></li>
<li id="userapp_li_1054337"><a href="../userapp.phpid1054337my_suffixlw_253d_253d.htm" title="快乐小镇"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~88.gif"></a></li>
<li id="userapp_li_1003049"><a href="../userapp.phpid1003049my_suffixlw_253d_253d.htm" title="每天进步"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~89.gif"></a></li>
<li id="userapp_li_1054214"><a href="../userapp.phpid1054214my_suffixlw_253d_253d.htm" title="花田喜事"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~90.gif"></a></li>
<li id="userapp_li_1056432"><a href="../userapp.phpid1056432my_suffixlw_253d_253d.htm" title="足球经理世界"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~91.gif"></a></li>
<li id="userapp_li_1051230"><a href="../userapp.phpid1051230my_suffixlw_253d_253d.htm" title="梦幻校园"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~92.gif"></a></li>
<li id="userapp_li_1055551"><a href="../userapp.phpid1055551my_suffixlw_253d_253d.htm" title="怪兽部落"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~93.gif"></a></li>
<li id="userapp_li_1056000"><a href="../userapp.phpid1056000my_suffixlw_253d_253d.htm" title="疯狂足球"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~94.gif"></a></li>
<li id="userapp_li_1055548"><a href="../userapp.phpid1055548my_suffixlw_253d_253d.htm" title="守望森林"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~95.gif"></a></li>
<li id="userapp_li_1051041"><a href="../userapp.phpid1051041my_suffixlw_253d_253d.htm" title="开心店铺"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~96.gif"></a></li>
<li id="userapp_li_1049305"><a href="../userapp.phpid1049305my_suffixlw_253d_253d.htm" title="城市大富豪"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~97.gif"></a></li>
<li id="userapp_li_1049431"><a href="../userapp.phpid1049431my_suffixlw_253d_253d.htm" title="魔王名单"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~98.gif"></a></li>
<li id="userapp_li_1051637"><a href="../userapp.phpid1051637my_suffixlw_253d_253d.htm" title="漂漂岛"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fico~99.gif"></a></li>
<li id="userapp_li_1053513"><a href="../userapp.phpid1053513my_suffixlw_253d_253d.htm" title="大航运时代"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fic~100.gif"></a></li>
<li id="userapp_li_1051353"><a href="../userapp.phpid1051353my_suffixlw_253d_253d.htm" title="电驴"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fic~101.gif"></a></li>
<li id="userapp_li_1053282"><a href="../userapp.phpid1053282my_suffixlw_253d_253d.htm" title="社区便利店"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fic~102.gif"></a></li>
<li id="userapp_li_1050266"><a href="../userapp.phpid1050266my_suffixlw_253d_253d.htm" title="园艺大亨"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fic~103.gif"></a></li>
<li id="userapp_li_1053099"><a href="../userapp.phpid1053099my_suffixlw_253d_253d.htm" title="时尚人生"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fic~104.gif"></a></li>
<li id="userapp_li_1052860"><a href="../userapp.phpid1052860my_suffixlw_253d_253d.htm" title="奇遇轮盘聊天世界"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fic~105.gif"></a></li>
<li id="userapp_li_1053201"><a href="../userapp.phpid1053201my_suffixlw_253d_253d.htm" title="倾城"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fic~106.gif"></a></li>
<li id="userapp_li_1051842"><a href="../userapp.phpid1051842my_suffixlw_253d_253d.htm" title="连连看总动员"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fic~107.gif"></a></li>
<li id="userapp_li_1014835"><a href="../userapp.phpid1014835my_suffixlw_253d_253d.htm" title="我要K图"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fic~108.gif"></a></li>
<li id="userapp_li_1052742"><a href="../userapp.phpid1052742my_suffixlw_253d_253d.htm" title="东北打棋摞"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fic~109.gif"></a></li>
<li id="userapp_li_1051803"><a href="../userapp.phpid1051803my_suffixlw_253d_253d.htm" title="随机视频"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fic~110.gif"></a></li>
<li id="userapp_li_1050467"><a href="../userapp.phpid1050467my_suffixlw_253d_253d.htm" title="幻宠奇缘"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fic~111.gif"></a></li>
<li id="userapp_li_1051907"><a href="../userapp.phpid1051907my_suffixlw_253d_253d.htm" title="欢乐客栈"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fic~112.gif"></a></li>
<li id="userapp_li_1051195"><a href="../userapp.phpid1051195my_suffixlw_253d_253d.htm" title="创世纪2012"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fic~113.gif"></a></li>
<li id="userapp_li_1049530"><a href="../userapp.phpid1049530my_suffixlw_253d_253d.htm" title="乡村传奇"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fic~114.gif"></a></li>
<li id="userapp_li_1051929"><a href="../userapp.phpid1051929my_suffixlw_253d_253d.htm" title="植物大战外星人"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fic~115.gif"></a></li>
<li id="userapp_li_1040624"><a href="../userapp.phpid1040624my_suffixlw_253d_253d.htm" title="弹弹堂"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fic~116.gif"></a></li>
<li id="userapp_li_1047721"><a href="../userapp.phpid1047721my_suffixlw_253d_253d.htm" title="天天背单词"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fic~117.gif"></a></li>
<li id="userapp_li_1050565"><a href="../userapp.phpid1050565my_suffixlw_253d_253d.htm" title="开心星钻"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fic~118.gif"></a></li>
<li id="userapp_li_1043652"><a href="../userapp.phpid1043652my_suffixlw_253d_253d.htm" title="跑火车"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fic~119.gif"></a></li>
<li id="userapp_li_1014051"><a href="../userapp.phpid1014051my_suffixlw_253d_253d.htm" title="读心术"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fic~120.gif"></a></li>
<li id="userapp_li_1033907"><a href="../userapp.phpid1033907my_suffixlw_253d_253d.htm" title="游戏账号中心"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fic~121.gif"></a></li>
<li id="userapp_li_1049094"><a href="../userapp.phpid1049094my_suffixlw_253d_253d.htm" title="主题学校"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fic~122.gif"></a></li>
<li id="userapp_li_1045020"><a href="../userapp.phpid1045020my_suffixlw_253d_253d.htm" title="干瞪眼"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fic~123.gif"></a></li>
<li id="userapp_li_1048677"><a href="../userapp.phpid1048677my_suffixlw_253d_253d.htm" title="快乐庄园"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fic~124.gif"></a></li>
<li id="userapp_li_1042221"><a href="../userapp.phpid1042221my_suffixlw_253d_253d.htm" title="全民富翁"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fic~125.gif"></a></li>
<li id="userapp_li_1042041"><a href="../userapp.phpid1042041my_suffixlw_253d_253d.htm" title="高清电影"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fic~126.gif"></a></li>
<li id="userapp_li_1050377"><a href="../userapp.phpid1050377my_suffixlw_253d_253d.htm" title="幸福摩天轮"><img src="../image/app/subject.gifurlhttp_3a_2f_2fappicon.manyou.com_2fic~127.gif"></a></li>
</ul>

</div>

<div id="mainarea">


<!--Add By 01-->

<div id="vs4con_t"><p><img src="../template/vicstyle4/image/con_t_l.gif" /></p></div>
<div id="vs4_content" style="padding:0 25px 0 25px;width:855px;">
<h2 class="title"><img src="../image/app/blog.gif" />日志</h2>
<div class="tabs_header">
<ul class="tabs">
<li><a href="space-1-do-blog-view-we.html"><span>好友最新日志</span></a></li><li class="active"><a href="space-1-do-blog-view-me.html"><span>我的日志</span></a></li>
<li><a href="../space-1-do-blog-view-click.html"><span>我踩过的日志</span></a></li>
<li><a href="../space-1-do-blog-view-all.html"><span>大家的日志</span></a></li>
<li class="null"><a href="../cp.phpacblog.htm">发表新日志</a></li>
</ul>
<div class="r_option">
<a  href="space-1-do-blog-view-me-page-18.html">&laquo; 返回上一页</a>
</div>
</div>

<script type="text/javascript" charset="gbk" src="../source/script_calendar.js"></script>

<div class="entry" style="padding:0 0 10px;">

<div class="title">
<h1>[<a href="../space-1-do-blog-classid-6.html">我转</a>]基于PECL OAuth打造微博应用</h1>	<!--Modify By 01-->
<span class="gray">已有 188 次阅读</span>&nbsp; <span class="gray">2011-03-29 20:44</span>
<!--&nbsp; 分类: <a href="space-1-do-blog-classid-6.html">我转</a>-->	<!--Add By 01-->
&nbsp; <a href="../space-1-do-tag.html">标签</a>:&nbsp;
<a href="../space-1-do-tag-id-557.html">OAuth</a>&nbsp;
<a href="../space-1-do-tag-id-546.html">微博</a>&nbsp;
</div>

<!-- 静态HTML读取密码文章 -->

<div id="blog_article" class="article " style="">
<div class="resizeimg">
<div class="resizeimg2">
<div class="resizeimg3">
<div class="resizeimg4">
<p><p>&nbsp;&nbsp;&nbsp;&nbsp;最近，国内主要门户网站相继开放了微博平台，对开发者而言这无疑是个利好消息，不过在实际使用中却发现平台质量良莠不齐，有很多不完善的地方，就拿PHP版SDK来说吧，多半都是用<a href="../../httpsgithub.com_2fabraham_2ftwitteroauth_2fdefault.htm/default.htm" target="_blank" target="_blank" target="_blank" target="_blank">TwitterOAuth</a>改的，一旦多平台集成，很容易出现命名冲突之类的问题。</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;既然官方SDK不给力，那我们只能发扬自力更生的革命精神了！好消息是PHP本身已经有了一个标准的OAuth实现：<a href="../../pecl.php.net/package/oauth" target="_blank" target="_blank" target="_blank" target="_blank">PECL OAuth</a>！下面以此为例来讲解一下如何实现微博应用：</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;说明：首先需要对OAuth概念有一定的了解，如不清楚可以参考我以前写的文章：<a href="../../huoding.com/2010/10/10/8" target="_blank" target="_blank" target="_blank" target="_blank">OAuth那些事儿</a>，其次需要注册成为各个微博平台（<a href="../../open.t.sina.com.cn/default.htm" target="_blank" target="_blank" target="_blank" target="_blank">新浪</a>，<a href="../../open.t.qq.com/default.htm" target="_blank" target="_blank" target="_blank" target="_blank">腾讯</a>，<a href="../../open.t.sohu.com/default.htm" target="_blank" target="_blank" target="_blank" target="_blank">搜狐</a>，<a href="../../open.t.163.com/default.htm" target="_blank" target="_blank" target="_blank" target="_blank">网易</a>）的开发者，拿到属于你自己的CONSUMER_KEY和CONSUMER_SECRET（有时也被称作APP_*）。</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;下面开始！假定我们要开发一个类似<a href="../../www.follow5.com/default.htm" target="_blank" target="_blank" target="_blank" target="_blank">Follow5</a>和<a href="../../weiboto.com/default.htm" target="_blank" target="_blank" target="_blank" target="_blank">微博通</a>的应用，简单点说就是把消息同时发送到多个微博平台，出于安全性的考虑，不会使用HTTP Basic，而会使用OAuth，这就需要我们先拿到Access Token和Access Token Secret。</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;以新浪微博为例，大致的代码如下：</p>
<p><font face="Monaco" size="2">
<table style="BORDER-RIGHT: #cccccc 1px dotted; TABLE-LAYOUT: fixed; BORDER-TOP: #cccccc 1px dotted; BORDER-LEFT: #cccccc 1px dotted; BORDER-BOTTOM: #cccccc 1px dotted" cellspacing="0" cellpadding="6" width="95%" align="center" border="0">
<tbody>
<tr>
<td style="WORD-WRAP: break-word" bgcolor="#fdfddf"><font style="FONT-WEIGHT: bold; COLOR: #990000">以下是代码片段：</font><br><font color="black">&lt;?php <br><br>session_start(); <br><br>$request_token_url&nbsp;=&nbsp;’http://api.t.sina.com.cn/oauth/request_token’; <br>$authorize_url&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;’http://api.t.sina.com.cn/oauth/authorize’; <br>$access_token_url&nbsp;&nbsp;=&nbsp;’http://api.t.sina.com.cn/oauth/access_token’; <br><br>$oauth&nbsp;=&nbsp;new&nbsp;OAuth( <br>&nbsp;&nbsp;&nbsp;&nbsp;’YOUR_CONSUMER_KEY’, <br>&nbsp;&nbsp;&nbsp;&nbsp;’YOUR_CONSUMER_SECRET’, <br>&nbsp;&nbsp;&nbsp;&nbsp;OAUTH_SIG_METHOD_HMACSHA1, <br>&nbsp;&nbsp;&nbsp;&nbsp;OAUTH_AUTH_TYPE_FORM <br>); <br><br>if&nbsp;(empty($_GET[’oauth_verifier’]))&nbsp;{ <br>&nbsp;&nbsp;&nbsp;&nbsp;$callback_url&nbsp;=&nbsp;"http://{$_SERVER[’HTTP_HOST’]}{$_SERVER[’REQUEST_URI’]}"; <br><br>&nbsp;&nbsp;&nbsp;&nbsp;$request_token&nbsp;=&nbsp;$oauth-&gt;getRequestToken($request_token_url); <br><br>&nbsp;&nbsp;&nbsp;&nbsp;$_SESSION[’oauth_token_secret’]&nbsp;=&nbsp;$request_token[’oauth_token_secret’]; <br><br>&nbsp;&nbsp;&nbsp;&nbsp;$param&nbsp;=&nbsp;array( <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;’oauth_token’&nbsp;&nbsp;&nbsp;&nbsp;=&gt;&nbsp;$request_token[’oauth_token’], <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;’oauth_callback’&nbsp;=&gt;&nbsp;$callback_url <br>&nbsp;&nbsp;&nbsp;&nbsp;); <br><br>&nbsp;&nbsp;&nbsp;&nbsp;header("Location:&nbsp;{$authorize_url}?"&nbsp;.&nbsp;http_build_query($param)); <br>&nbsp;&nbsp;&nbsp;&nbsp;exit; <br>} <br><br>$oauth-&gt;setToken($_GET[’oauth_token’],&nbsp;$_SESSION[’oauth_token_secret’]); <br><br>$access_token&nbsp;=&nbsp;$oauth-&gt;getAccessToken( <br>&nbsp;&nbsp;&nbsp;&nbsp;$access_token_url,&nbsp;null,&nbsp;$_GET[’oauth_verifier’] <br>); <br><br>var_dump($access_token); <br><br>?&gt;</font></td></tr></tbody></table>
</p><p>&nbsp;&nbsp;&nbsp;&nbsp;腾讯微博相比较而言有点特殊，大致代码如下：</p>
<p><font face="Monaco" size="2">
<table style="BORDER-RIGHT: #cccccc 1px dotted; TABLE-LAYOUT: fixed; BORDER-TOP: #cccccc 1px dotted; BORDER-LEFT: #cccccc 1px dotted; BORDER-BOTTOM: #cccccc 1px dotted" cellspacing="0" cellpadding="6" width="95%" align="center" border="0">
<tbody>
<tr>
<td style="WORD-WRAP: break-word" bgcolor="#fdfddf"><font style="FONT-WEIGHT: bold; COLOR: #990000">以下是代码片段：</font><br><font color="black">&lt;?php <br><br>session_start(); <br><br>$request_token_url&nbsp;=&nbsp;’https://open.t.qq.com/cgi-bin/request_token’; <br>$authorize_url&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;’https://open.t.qq.com/cgi-bin/authorize’; <br>$access_token_url&nbsp;&nbsp;=&nbsp;’https://open.t.qq.com/cgi-bin/access_token’; <br><br>$oauth&nbsp;=&nbsp;new&nbsp;OAuth( <br>&nbsp;&nbsp;&nbsp;&nbsp;’YOUR_CONSUMER_KEY’, <br>&nbsp;&nbsp;&nbsp;&nbsp;’YOUR_CONSUMER_SECRET’, <br>&nbsp;&nbsp;&nbsp;&nbsp;OAUTH_SIG_METHOD_HMACSHA1, <br>&nbsp;&nbsp;&nbsp;&nbsp;OAUTH_AUTH_TYPE_FORM <br>); <br><br>$oauth-&gt;setNonce(md5(mt_rand())); <br><br>if&nbsp;(empty($_GET[’oauth_verifier’]))&nbsp;{ <br>&nbsp;&nbsp;&nbsp;&nbsp;$callback_url&nbsp;=&nbsp;"http://{$_SERVER[’HTTP_HOST’]}{$_SERVER[’REQUEST_URI’]}"; <br><br>&nbsp;&nbsp;&nbsp;&nbsp;$request_token&nbsp;=&nbsp;$oauth-&gt;getRequestToken($request_token_url,&nbsp;$callback_url); <br><br>&nbsp;&nbsp;&nbsp;&nbsp;$_SESSION[’oauth_token_secret’]&nbsp;=&nbsp;$request_token[’oauth_token_secret’]; <br><br>&nbsp;&nbsp;&nbsp;&nbsp;$param&nbsp;=&nbsp;array( <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;’oauth_token’&nbsp;=&gt;&nbsp;$request_token[’oauth_token’] <br>&nbsp;&nbsp;&nbsp;&nbsp;); <br><br>&nbsp;&nbsp;&nbsp;&nbsp;header("Location:&nbsp;{$authorize_url}?"&nbsp;.&nbsp;http_build_query($param)); <br>&nbsp;&nbsp;&nbsp;&nbsp;exit; <br>} <br><br>$oauth-&gt;setToken($_GET[’oauth_token’],&nbsp;$_SESSION[’oauth_token_secret’]); <br><br>$access_token&nbsp;=&nbsp;$oauth-&gt;getAccessToken( <br>&nbsp;&nbsp;&nbsp;&nbsp;$access_token_url,&nbsp;null,&nbsp;$_GET[’oauth_verifier’] <br>); <br><br>var_dump($access_token); <br><br>?&gt;</font></td></tr></tbody></table>
</p><p>&nbsp;&nbsp;&nbsp;&nbsp;注意：参数nonce和callback的设置，详见：<a href="../../www.mikespook.com/index.php/archives/798" target="_blank" target="_blank" target="_blank" target="_blank">使用 PECL 的 OAuth 库访问 QQ 微博 API</a>。</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;照猫画虎就能得到搜狐和网易的Access Token和Access Token Secret了，我就不罗嗦了。</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;下面继续做我们的微博应用，发消息一般都是文本形式的，不过有中国特色的微薄开放平台支持文本加图片的方式：图片上传到服务器，但本身并不参与签名。这和标准OAuth是冲突的，所以要扩展一下PECL OAuth，并且尽可能兼容原类的使用方法和习惯：</p>
<p><font face="Monaco" size="2">
<table style="BORDER-RIGHT: #cccccc 1px dotted; TABLE-LAYOUT: fixed; BORDER-TOP: #cccccc 1px dotted; BORDER-LEFT: #cccccc 1px dotted; BORDER-BOTTOM: #cccccc 1px dotted" cellspacing="0" cellpadding="6" width="95%" align="center" border="0">
<tbody>
<tr>
<td style="WORD-WRAP: break-word" bgcolor="#fdfddf"><font style="FONT-WEIGHT: bold; COLOR: #990000">以下是代码片段：</font><br><font color="black">&lt;?php <br><br>class&nbsp;MicroblogOAuth&nbsp;extends&nbsp;OAuth <br>{ <br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;$consumer_key; <br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;$signature_method; <br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;$auth_type; <br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;$nonce; <br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;$timestamp; <br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;$token; <br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;$version; <br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;$request_engine; <br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;$last_response; <br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;setAuthType($auth_type) <br>&nbsp;&nbsp;&nbsp;&nbsp;{ <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(parent::setAuthType($auth_type))&nbsp;{ <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;auth_type&nbsp;=&nbsp;$auth_type; <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false; <br>&nbsp;&nbsp;&nbsp;&nbsp;} <br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;setNonce($nonce) <br>&nbsp;&nbsp;&nbsp;&nbsp;{ <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(parent::setNonce($nonce))&nbsp;{ <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;nonce&nbsp;=&nbsp;$nonce; <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false; <br>&nbsp;&nbsp;&nbsp;&nbsp;} <br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;setTimestamp($timestamp) <br>&nbsp;&nbsp;&nbsp;&nbsp;{ <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(parent::setTimestamp($timestamp))&nbsp;{ <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;timestamp&nbsp;=&nbsp;$timestamp; <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false; <br>&nbsp;&nbsp;&nbsp;&nbsp;} <br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;setToken($token,&nbsp;$token_secret) <br>&nbsp;&nbsp;&nbsp;&nbsp;{ <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(parent::setToken($token,&nbsp;$token_secret))&nbsp;{ <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;token&nbsp;=&nbsp;$token; <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false; <br>&nbsp;&nbsp;&nbsp;&nbsp;} <br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;setVersion($version) <br>&nbsp;&nbsp;&nbsp;&nbsp;{ <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(parent::setVersion($version))&nbsp;{ <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;version&nbsp;=&nbsp;$version; <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false; <br>&nbsp;&nbsp;&nbsp;&nbsp;} <br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;setRequestEngine($request_engine) <br>&nbsp;&nbsp;&nbsp;&nbsp;{ <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{ <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parent::setRequestEngine($request_engine); <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;request_engine&nbsp;=&nbsp;$request_engine; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;catch(OAuthException&nbsp;$e)&nbsp;{ <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;$e-&gt;getMessage(); <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <br>&nbsp;&nbsp;&nbsp;&nbsp;} <br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;getLastResponse() <br>&nbsp;&nbsp;&nbsp;&nbsp;{ <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;parent::getLastResponse()&nbsp;?:&nbsp;$this-&gt;last_response; <br>&nbsp;&nbsp;&nbsp;&nbsp;} <br><br>&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;upload($url,&nbsp;$file,&nbsp;$param&nbsp;=&nbsp;array(),&nbsp;$header&nbsp;=&nbsp;array()) <br>&nbsp;&nbsp;&nbsp;&nbsp;{ <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$boundary&nbsp;=&nbsp;sprintf(’%010d’,&nbsp;mt_rand()); <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$header[]&nbsp;=&nbsp;"Content-Type:&nbsp;multipart/form-data;&nbsp;boundary={$boundary}"; <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oauth&nbsp;=&nbsp;array( <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;’oauth_consumer_key’&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt;&nbsp;$this-&gt;consumer_key, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;’oauth_nonce’&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt;&nbsp;$this-&gt;nonce, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;’oauth_signature_method’&nbsp;=&gt;&nbsp;$this-&gt;signature_method, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;’oauth_timestamp’&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt;&nbsp;$this-&gt;timestamp, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;’oauth_token’&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt;&nbsp;$this-&gt;token, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;’oauth_version’&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt;&nbsp;$this-&gt;version, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;); <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;auth_type&nbsp;==&nbsp;OAUTH_AUTH_TYPE_FORM)&nbsp;{ <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$param&nbsp;+=&nbsp;$oauth; <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$param[’oauth_signature’]&nbsp;=&nbsp;$this-&gt;generateSignature( <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OAUTH_HTTP_METHOD_POST,&nbsp;$url,&nbsp;$param <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;); <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{ <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oauth_header&nbsp;=&nbsp;array(); <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oauth[’oauth_signature’]&nbsp;=&nbsp;$this-&gt;generateSignature( <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OAUTH_HTTP_METHOD_POST,&nbsp;$url,&nbsp;$param <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;); <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;($oauth&nbsp;AS&nbsp;$name&nbsp;=&gt;&nbsp;$value)&nbsp;{ <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$oauth_header[]&nbsp;=&nbsp;$name&nbsp;.&nbsp;’="’&nbsp;.&nbsp;$value&nbsp;.&nbsp;’"’; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$header[]&nbsp;=&nbsp;’Authorization:&nbsp;OAuth&nbsp;’&nbsp;.&nbsp;implode(’,&nbsp;’,&nbsp;$oauth_header); <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$content_disposition&nbsp;=&nbsp;function($name,&nbsp;$filename&nbsp;=&nbsp;null)&nbsp;{ <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$result&nbsp;=&nbsp;’Content-Disposition:&nbsp;form-data;&nbsp;name="’&nbsp;.&nbsp;$name&nbsp;.&nbsp;’"’; <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($filename&nbsp;!==&nbsp;null)&nbsp;{ <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$result&nbsp;.=&nbsp;’;&nbsp;filename="’&nbsp;.&nbsp;$filename&nbsp;.&nbsp;’"’; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$result; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}; <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$content&nbsp;=&nbsp;array(); <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;($file&nbsp;as&nbsp;$name&nbsp;=&gt;&nbsp;$value)&nbsp;{ <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$filename&nbsp;=&nbsp;pathinfo($value,&nbsp;PATHINFO_BASENAME); <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;switch(strtolower(pathinfo($filename,&nbsp;PATHINFO_EXTENSION)))&nbsp;{ <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;’gif’; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$mime&nbsp;=&nbsp;’image/gif’; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;’jpeg’: <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;’jpg’: <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$mime&nbsp;=&nbsp;’image/jpg’; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;’png’; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$mime&nbsp;=&nbsp;’image/png’; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default: <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$mime&nbsp;=&nbsp;’application/octet-stream’; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$content_type&nbsp;=&nbsp;"Content-Type:&nbsp;{$mime}"; <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$content[]&nbsp;=&nbsp;"--{$boundary}"; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$content[]&nbsp;=&nbsp;$content_disposition($name,&nbsp;$filename); <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$content[]&nbsp;=&nbsp;$content_type; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$content[]&nbsp;=&nbsp;’’; <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$content[]&nbsp;=&nbsp;file_get_contents($value); <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ksort($param); <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;($param&nbsp;as&nbsp;$name&nbsp;=&gt;&nbsp;$value)&nbsp;{ <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$content[]&nbsp;=&nbsp;"--{$boundary}"; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$content[]&nbsp;=&nbsp;$content_disposition($name); <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$content[]&nbsp;=&nbsp;’’; <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$content[]&nbsp;=&nbsp;$value; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$content[]&nbsp;=&nbsp;"--{$boundary}--"; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$content[]&nbsp;=&nbsp;’’; <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$content&nbsp;=&nbsp;implode("rn",&nbsp;$content); <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;request_engine&nbsp;==&nbsp;OAUTH_REQENGINE_CURL)&nbsp;{ <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$curl&nbsp;=&nbsp;curl_init(); <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt($curl,&nbsp;CURLOPT_POST,&nbsp;true); <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt($curl,&nbsp;CURLOPT_POSTFIELDS,&nbsp;$content); <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt($curl,&nbsp;CURLOPT_HTTPHEADER,&nbsp;$header); <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt($curl,&nbsp;CURLOPT_URL,&nbsp;$url); <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curl_setopt($curl,&nbsp;CURLOPT_RETURNTRANSFER,&nbsp;true); <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$response&nbsp;=&nbsp;curl_exec($curl); <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;curl_close($curl); <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{ <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$header[]&nbsp;=&nbsp;’Connection:&nbsp;close’; <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$context&nbsp;=&nbsp;stream_context_create(array( <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;’http’&nbsp;=&gt;&nbsp;array( <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;’protocol_version’&nbsp;=&gt;&nbsp;’1.1’, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;’method’&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt;&nbsp;’POST’, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;’content’&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt;&nbsp;$content, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;’header’&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt;&nbsp;implode("rn",&nbsp;$header), <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)); <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$response&nbsp;=&nbsp;file_get_contents($url,&nbsp;false,&nbsp;$context); <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($response)&nbsp;{ <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;last_response&nbsp;=&nbsp;$response; <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false; <br>&nbsp;&nbsp;&nbsp;&nbsp;} <br>} <br><br>?&gt;</font></td></tr></tbody></table>
</p><p>&nbsp;&nbsp;&nbsp;&nbsp;说明：如果使用PHP Streams方式发送请求的话，需要注意HTTP版本的问题，否则某些情况下请求会被防火墙拦截，详见：<a href="../../soulogic.com/archives/412" target="_blank" target="_blank" target="_blank" target="_blank">由于 HTTP request 不规范导致的被防火墙拦截</a>。</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;新类MicroblogOAuth直接扩展自PECL的OAuth类！随着PHP内核API的逐渐类化，这样的扩展方式将会越来越常见，值得开发人员重视。</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;为了让调用方式更统一，使用工厂方法包装MicroblogOAuth的实例化过程：</p>
<p><font face="Monaco" size="2">
<table style="BORDER-RIGHT: #cccccc 1px dotted; TABLE-LAYOUT: fixed; BORDER-TOP: #cccccc 1px dotted; BORDER-LEFT: #cccccc 1px dotted; BORDER-BOTTOM: #cccccc 1px dotted" cellspacing="0" cellpadding="6" width="95%" align="center" border="0">
<tbody>
<tr>
<td style="WORD-WRAP: break-word" bgcolor="#fdfddf"><font style="FONT-WEIGHT: bold; COLOR: #990000">以下是代码片段：</font><br><font color="black">&lt;?php <br><br>function&nbsp;OAuth($consumer_key,&nbsp;$consumer_secret,&nbsp;$signature_method,&nbsp;$auth_type) <br>{ <br>&nbsp;&nbsp;&nbsp;&nbsp;$instance&nbsp;=&nbsp;new&nbsp;MicroblogOAuth( <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$consumer_key, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$consumer_secret, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$signature_method, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$auth_type <br>&nbsp;&nbsp;&nbsp;&nbsp;); <br><br>&nbsp;&nbsp;&nbsp;&nbsp;$instance-&gt;consumer_key&nbsp;=&nbsp;$consumer_key; <br>&nbsp;&nbsp;&nbsp;&nbsp;$instance-&gt;signature_method&nbsp;=&nbsp;$signature_method; <br><br>&nbsp;&nbsp;&nbsp;&nbsp;$instance-&gt;setAuthType($auth_type); <br>&nbsp;&nbsp;&nbsp;&nbsp;$instance-&gt;setNonce(md5(mt_rand())); <br>&nbsp;&nbsp;&nbsp;&nbsp;$instance-&gt;setTimestamp(time()); <br>&nbsp;&nbsp;&nbsp;&nbsp;$instance-&gt;setVersion(’1.0’); <br><br>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(extension_loaded(’curl’))&nbsp;{ <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$instance-&gt;setRequestEngine(OAUTH_REQENGINE_CURL); <br>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{ <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$instance-&gt;setRequestEngine(OAUTH_REQENGINE_STREAMS); <br>&nbsp;&nbsp;&nbsp;&nbsp;} <br><br>&nbsp;&nbsp;&nbsp;&nbsp;$instance-&gt;last_response&nbsp;=&nbsp;null; <br><br>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$instance; <br>} <br><br>?&gt;</font></td></tr></tbody></table>
</p><p>&nbsp;&nbsp;&nbsp;&nbsp;先看看搜狐是如何发送文本加图片消息的：</p>
<p><font face="Monaco" size="2">
<table style="BORDER-RIGHT: #cccccc 1px dotted; TABLE-LAYOUT: fixed; BORDER-TOP: #cccccc 1px dotted; BORDER-LEFT: #cccccc 1px dotted; BORDER-BOTTOM: #cccccc 1px dotted" cellspacing="0" cellpadding="6" width="95%" align="center" border="0">
<tbody>
<tr>
<td style="WORD-WRAP: break-word" bgcolor="#fdfddf"><font style="FONT-WEIGHT: bold; COLOR: #990000">以下是代码片段：</font><br><font color="black">&lt;?php <br><br>$text&nbsp;&nbsp;=&nbsp;’hello,&nbsp;world.’; <br>$image&nbsp;=&nbsp;’http://www.foo.com/bar.gif’; <br><br>$oauth&nbsp;=&nbsp;OAuth( <br>&nbsp;&nbsp;&nbsp;&nbsp;’YOUR_CONSUMER_KEY’, <br>&nbsp;&nbsp;&nbsp;&nbsp;’YOUR_CONSUMER_SECRET’, <br>&nbsp;&nbsp;&nbsp;&nbsp;OAUTH_SIG_METHOD_HMACSHA1, <br>&nbsp;&nbsp;&nbsp;&nbsp;OAUTH_AUTH_TYPE_AUTHORIZATION <br>); <br><br>$oauth-&gt;setToken( <br>&nbsp;&nbsp;&nbsp;&nbsp;’YOUR_ACCESS_TOKEN’, <br>&nbsp;&nbsp;&nbsp;&nbsp;’YOUR_ACCESS_TOKEN_SECRET’ <br>); <br><br>$oauth-&gt;upload( <br>&nbsp;&nbsp;&nbsp;&nbsp;’http://api.t.sohu.com/statuses/upload.json’, <br>&nbsp;&nbsp;&nbsp;&nbsp;array(’pic’&nbsp;=&gt;&nbsp;$image), <br>&nbsp;&nbsp;&nbsp;&nbsp;array(’status’&nbsp;=&gt;&nbsp;oauth_urlencode($text)) <br>); <br><br>$result&nbsp;=&nbsp;json_decode($oauth-&gt;getLastResponse(),&nbsp;true); <br><br>var_dump($result); <br><br>?&gt;</font></td></tr></tbody></table>
</p><p>&nbsp;&nbsp;&nbsp;&nbsp;说明：搜狐要求文本要先编码，然后和图片一起发送，这点不同于其它微博开放平台。</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;再看看网易是如何发送文本加图片消息的：</p>
<p><font face="Monaco" size="2">
<table style="BORDER-RIGHT: #cccccc 1px dotted; TABLE-LAYOUT: fixed; BORDER-TOP: #cccccc 1px dotted; BORDER-LEFT: #cccccc 1px dotted; BORDER-BOTTOM: #cccccc 1px dotted" cellspacing="0" cellpadding="6" width="95%" align="center" border="0">
<tbody>
<tr>
<td style="WORD-WRAP: break-word" bgcolor="#fdfddf"><font style="FONT-WEIGHT: bold; COLOR: #990000">以下是代码片段：</font><br><font color="black">&lt;?php <br><br>$text&nbsp;&nbsp;=&nbsp;’hello,&nbsp;world.’; <br>$image&nbsp;=&nbsp;’http://www.foo.com/bar.gif’; <br><br>$oauth&nbsp;=&nbsp;OAuth( <br>&nbsp;&nbsp;&nbsp;&nbsp;’YOUR_CONSUMER_KEY’, <br>&nbsp;&nbsp;&nbsp;&nbsp;’YOUR_CONSUMER_SECRET’, <br>&nbsp;&nbsp;&nbsp;&nbsp;OAUTH_SIG_METHOD_HMACSHA1, <br>&nbsp;&nbsp;&nbsp;&nbsp;OAUTH_AUTH_TYPE_AUTHORIZATION <br>); <br><br>$oauth-&gt;setToken( <br>&nbsp;&nbsp;&nbsp;&nbsp;’YOUR_ACCESS_TOKEN’, <br>&nbsp;&nbsp;&nbsp;&nbsp;’YOUR_ACCESS_TOKEN_SECRET’ <br>); <br><br>$oauth-&gt;upload( <br>&nbsp;&nbsp;&nbsp;&nbsp;’http://api.t.163.com/statuses/upload.json’, <br>&nbsp;&nbsp;&nbsp;&nbsp;array(’pic’&nbsp;=&gt;&nbsp;$image) <br>); <br><br>$result&nbsp;=&nbsp;json_decode($oauth-&gt;getLastResponse(),&nbsp;true); <br><br>if&nbsp;(isset($result[’upload_image_url’]))&nbsp;{ <br>&nbsp;&nbsp;&nbsp;&nbsp;$text&nbsp;.=&nbsp;"&nbsp;{$result[’upload_image_url’]}"; <br>} <br><br>$oauth-&gt;fetch( <br>&nbsp;&nbsp;&nbsp;&nbsp;’http://api.t.163.com/statuses/update.json’, <br>&nbsp;&nbsp;&nbsp;&nbsp;array(’status’&nbsp;=&gt;&nbsp;$text), <br>&nbsp;&nbsp;&nbsp;&nbsp;OAUTH_HTTP_METHOD_POST <br>); <br><br>$result&nbsp;=&nbsp;json_decode($oauth-&gt;getLastResponse(),&nbsp;true); <br><br>var_dump($result); <br><br>?&gt;</font></td></tr></tbody></table>
</p><p>&nbsp;&nbsp;&nbsp;&nbsp;说明：网易发送文本加图片消息是分两步实现的，先上传图片，然后把图片的URL附加在文本信息的后面再发送到服务器，这点不同于其它微博开放平台。</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;收工！微博开放平台的使用并没有太多复杂的地方，仔细看文档调试，一般的问题都很容易解决。有了上面的基础代码，只要再使用适配器模式分别包装一下各个微博平台，很容易就能实现一套通用SDK，搞定新浪，腾讯，搜狐，网易！</p></font></font></font></font></font></font><p><br></p><p><font color="#c0c0c0">转自：http://huoding.com/2011/01/16/42</font></p><p></p></div>
</div>
</div>
</div>
</div>
</div>

<div style="padding:0 0 10px;">
<div style="text-align: right; padding-top:10px; ">
<a href="../cp.phpacsharetypeblogid1211" id="a_share" onclick="ajaxmenu(event, this.id, 1)" class="a_share">分享</a>

<img src="../image/magic/bgimage.small.gif" class="magicicon">
<a href="../magic.phpmidbgimageidtypeblogidid1211" id="a_magic_bgimage" onclick="ajaxmenu(event,this.id, 1)">信纸</a>	
<img src="../image/magic/call.small.gif" class="magicicon">
<a href="../magic.phpmidcallidtypeblogidid1211" id="a_magic_call" onclick="ajaxmenu(event,this.id, 1)">点名卡</a>
<img src="../image/magic/updateline.small.gif" class="magicicon">
<a href="../magic.phpmidupdatelineidtypeblogidid1211" id="a_magic_updateline" onclick="ajaxmenu(event,this.id, 1)">救生圈</a>
<img src="../image/magic/downdateline.small.gif" class="magicicon">
<a href="../magic.phpmiddowndatelineidtypeblogidid1211" id="a_magic_downdateline" onclick="ajaxmenu(event,this.id, 1)">时空机</a>
<img src="../image/magic/color.small.gif" class="magicicon">
<a href="../magic.phpmidcoloridtypeblogidid1211" id="a_magic_color" onclick="ajaxmenu(event,this.id, 1)">彩色灯</a>
<img src="../image/magic/hot.small.gif" class="magicicon">
<a href="../magic.phpmidhotidtypeblogidid1211" id="a_magic_hot" onclick="ajaxmenu(event,this.id, 1)">热点灯</a>
<span class="pipe">|</span>

<a href="../cp.phpactopicopjoinid1211idtypeblogid" id="a_topicjoin_1211" onclick="ajaxmenu(event, this.id)">凑热闹</a><span class="pipe">|</span>
<a href="../cp.phpacblogblogid1211opedit">编辑</a><span class="pipe">|</span>
<a href="../cp.phpacblogblogid1211opdelete" id="blog_delete_1211" onclick="ajaxmenu(event, this.id)">删除</a><span class="pipe">|</span>
<a href="../cp.phpacblogblogid1211opedithot" id="blog_hot_1211" onclick="ajaxmenu(event, this.id)">热度</a><span class="pipe">|</span>
<a href="../cp.phpaccommonopreportidtypeblogidid1211" id="a_report" onclick="ajaxmenu(event, this.id, 1)">举报</a>
</div>

</div>

<div id="content">

<div id="click_div">

<div class="digc">
<table>
<tr>
<td valign="bottom"><a href="../cp~9345.phpac" id="click_blogid_1211_1" onclick="ajaxmenu(event, this.id, 0, 2000, 'show_click')"><div class="digface"><img src="../image/click/luguo.gif" alt="" /><br />路过</div></a></td>
<td valign="bottom"><a href="../cp~9346.phpac" id="click_blogid_1211_5" onclick="ajaxmenu(event, this.id, 0, 2000, 'show_click')"><div class="digface"><img src="../image/click/jidan.gif" alt="" /><br />鸡蛋</div></a></td>
<td valign="bottom"><a href="../cp~9347.phpac" id="click_blogid_1211_4" onclick="ajaxmenu(event, this.id, 0, 2000, 'show_click')"><div class="digface"><img src="../image/click/xianhua.gif" alt="" /><br />鲜花</div></a></td>
<td valign="bottom"><a href="../cp~9348.phpac" id="click_blogid_1211_3" onclick="ajaxmenu(event, this.id, 0, 2000, 'show_click')"><div class="digface"><img src="../image/click/woshou.gif" alt="" /><br />握手</div></a></td>
<td valign="bottom"><a href="../cp~9349.phpac" id="click_blogid_1211_2" onclick="ajaxmenu(event, this.id, 0, 2000, 'show_click')"><div class="digface"><img src="../image/click/leiren.gif" alt="" /><br />雷人</div></a></td>
</tr>
</table>
</div>



</div>

<div class="tuishare">
<ul>
<li>分享：<a href="../../www.douban.com/recommend/url{$url}title_25bb_25f9_25d3_25dapecloauth_25b4_25f2~1" title="豆瓣9点" target="_blank"><img src="../image/tui/duo9.png" border=0 

alt="豆瓣9点" align="absmiddle"></a><a href="../../digg.com/submitphase2url{$url}title_25bb_25f9_25d3_25dapecloau~1" title="Digg" target="_blank"><img src="../image/tui/digg.png" border=0 

alt="Digg" align="absmiddle"></a><a href="../../www.kaixin001.com/repaste/share.phprtitle_25bb_25f9_25d3_25dapecloauth_25b4_25f~1.html" title="开心网" target="_blank"><img src="../image/tui/kaixin001.gif" border=0 

alt="开心网" align="absmiddle"></a><a href="../../share.renren.com/share/buttonshare.dolinkhttp_253a_252f_252fu.shenei.net~1720.htmlt" title="人人网" target="_blank"><img src="../image/tui/renren.gif" border=0 

alt="人人网" align="absmiddle"></a><a href="../../www.douban.com/recommend/urlhttp_253a_252f_252fu.shenei.net_252fspace-1-do-~173.htmlt" title="豆瓣" target="_blank"><img src="../image/tui/duo.png" border=0 

alt="豆瓣" align="absmiddle"></a></li>
<ul>收藏：<a href="../../www.google.com/bookmarks/markopeditoutputpopupbkmkhttp_253a_252f_252fu.she~1360.htmlt" title="Google书签" target="_blank"><img src="../image/tui/gg.jpg" border=0 alt="Google书签"align="absmiddle"></a><a href="../'http_3a/delicious.com/saveurlhttp_253a_252f_252fu.shenei.net_252fspace-1~225.htmlt" title="Del.icio.us" target="_blank"><img src="../image/tui/de.jpg" border=0 alt="Del.icio.us"align="absmiddle"></a><a href="../../myweb.cn.yahoo.com/popadd.htmlurlhttp_253a_252f_252fu.shenei.net_252~1620.htmlt" title="雅虎收藏" target="_blank"><img src="../image/tui/yahoo.jpg" border=0 alt="雅虎收藏"align="absmiddle"></a><a href="../../vivi.sina.com.cn/collect/icollect~763.phppi" title="爱问VIVI" target="_blank"><img src="../image/tui/sinavivi.gif" border=0 alt="爱问VIVI"align="absmiddle"></a><a href="../../cang.baidu.com/do/addit_25bb_25f9_25d3_25dapecloauth_25b4_25f2_25d4_25e~1.htmlf#nw=1" title="百度收藏" target="_blank"><img src="../image/tui/baidushoucang.gif" border=0 alt="百度收藏"align="absmiddle"></a><a href="../../shuqian.qq.com/postfrom3title_25bb_25f9_25d3_25dapecloauth_25b4_25f2~1" title="QQ书签" target="_blank"><img src="../image/tui/qqshuqian.gif" border=0 alt="QQ书签"align="absmiddle"></a></li>
<li>推广：<input type="text" value="http://u.shenei.net/space-1-do-blog-id-1211.html.html" size="60" name="theurl" id="theurl"> <input type="button" value="复制地址" 

onclick="javascript:setCopy('../space-1-do-blog-id-1211.html.html');return false;">
</li>
</ul>
</div>
<!--Add By 01-->

<div class="comments" id="div_main_content">
<h2>
<a href="#quickcommentform_1211" class="r_option">发表评论</a>
评论 (<span id="comment_replynum">1</span> 个评论)</h2>
<div class="page"></div>
<div class="comments_list" id="comment">
<ul id="comment_ul">
<li id="comment_3578_li"><div class="avatar48"><a href="../space-1.html"><img src="../..//uc.shenei.net/data/avatar/000/00/00/01_real_avatar_small.jpg" onerror="this.onerror=null;this.src='http://uc.shenei.net/images/avatar/m_01_small.gif'"></a></div>
<div class="title">
<div class="r_option">


<img src="../image/magic/anonymous.small.gif" class="magicicon">
<a id="a_magic_anonymous_3578" href="../magic.phpmidanonymousidtypecidid3578" onclick="ajaxmenu(event,this.id, 1)">匿名卡</a>
<span class="pipe">|</span>
<img src="../image/magic/flicker.small.gif" class="magicicon">
<a id="a_magic_flicker_3578" href="../magic.phpmidflickeridtypecidid3578" onclick="ajaxmenu(event,this.id, 1)">彩虹炫</a>
<span class="pipe">|</span>

<a href="../cp.phpaccommentopeditcid3578" id="c_3578_edit" onclick="ajaxmenu(event, this.id, 1)">编辑</a>
<a href="../cp.phpaccommentopdeletecid3578" id="c_3578_delete" onclick="ajaxmenu(event, this.id)">删除</a>
<a href="../cp.phpaccommonopreportidtypecommentid3578" id="a_report_3578" onclick="ajaxmenu(event, this.id, 1)">举报</a>
</div>

<a href="../space-1.html" id="author_3578">小E←邱沼懿</a> 
<span class="gray">2011-03-29 20:47</span>

</div>

<div class="detail" id="comment_3578">终于找到了提到同步冲突问题的文章了。。<br />
先上到这里。。回头慢慢折腾。。。<br />
（现在同步操作同步到新浪和腾讯还不能同时进行- =</div>

</li></ul>
</div>
<div class="page"></div>

<form id="quickcommentform_1211" name="quickcommentform_1211" action="cp.php?ac=comment" method="post" class="quickpost">

<table cellpadding="0" cellspacing="0">
<tr>
<td>
<a href="###" id="comment_face" title="插入表情" onclick="showFace(this.id, 'comment_message');return false;"><img src="../image/facelist.gif" align="absmiddle" /></a>
<a id="a_magic_doodle" href="../magic.phpmiddoodleshowidcomment_doodletargetcomment_message.htm" onclick="ajaxmenu(event, this.id, 1)"><img src="../image/magic/doodle.small.gif" class="magicicon" />涂鸦板</a>
<br />
<textarea id="comment_message" onkeydown="ctrlEnter(event, 'commentsubmit_btn');" name="message" rows="5" style="width:500px;"></textarea>
</td>
</tr>
<tr>
<td>
<input type="hidden" name="refer" value="space.php?uid=1&do=blog&id=1211" />
<input type="hidden" name="id" value="1211">
<input type="hidden" name="idtype" value="blogid">
<input type="hidden" name="commentsubmit" value="true" />
<input type="button" id="commentsubmit_btn" name="commentsubmit_btn" class="submit" value="评论" onclick="ajaxpost('quickcommentform_1211', 'comment_add')" />
<input type="checkbox" name="hiddenreply" value="1"> 评论仅作者可见
<div id="__quickcommentform_1211"></div>
</td>
</tr>
</table>
<input type="hidden" name="formhash" value="d5aa53ee" /></form>
<br />
</div>

</div>


<div id="sidebar" style="padding-top:20px;">


<div class="sidebox">
<h2 class="title">
<a href="space-1-do-blog-view-me.html" class="r_option">全部</a>
作者的其他最新日志
</h2>
<ul class="news_list">
<li style="height:auto;"><a href="space-1-do-blog-id-7750.html">LBS应用用户行动轨迹设计杂思</a></li>
<li style="height:auto;"><a href="space-1-do-blog-id-7742.html">门槛</a></li>
<li style="height:auto;"><a href="space-1-do-blog-id-7725.html">如何搭建开源PHP开发调试环境</a></li>
<li style="height:auto;"><a href="space-1-do-blog-id-7724.html">【贤贤来听听小E唱的】我想我不够好</a></li>
<li style="height:auto;"><a href="space-1-do-blog-id-7717.html">Js基础之基本数据类型和引用类型的参数传递详细分析</a></li>
<li style="height:auto;"><a href="space-1-do-blog-id-7713.html">创业技能整理——小平</a></li>
</ul>
</div>

<div class="sidebox">
<h2 class="title">热门日志导读</h2>
<ul class="news_list">
<li style="height:auto;"><a href="../space-1.html" style="font-weight:bold;">小E←邱沼懿</a>: <a href="space-1-do-blog-id-1291.html">偷拍</a></li>
<li style="height:auto;"><a href="../space-1.html" style="font-weight:bold;">小E←邱沼懿</a>: <a href="space-1-do-blog-id-1152.html">蝴蝶眨几次眼睛 我才眨几次</a></li>
<li style="height:auto;"><a href="../space-1.html" style="font-weight:bold;">小E←邱沼懿</a>: <a href="space-1-do-blog-id-1140.html">又翘课了。。。</a></li>
<li style="height:auto;"><a href="../space-258.html" style="font-weight:bold;">黄晓波</a>: <a href="../space-258-do-blog-id-1046.html">清仓清仓！剩的不多！买到赚到！</a></li>
<li style="height:auto;"><a href="../space-214.html" style="font-weight:bold;">王美辰</a>: <a href="../space-214-do-blog-id-1044.html">高三</a></li>
</ul>
</div>


</div>


<script type="text/javascript">
<!--
function closeSide2(oo) {
if($('sidebar').style.display == 'none'){
$('content').style.cssText = '';
$('sidebar').style.display = 'block';
oo.innerHTML = '&raquo; 关闭侧边栏';
}
else{
$('content').style.cssText = 'margin: 0pt; width: 810px;';
$('sidebar').style.display = 'none';
oo.innerHTML = '&laquo; 打开侧边栏';
}
}
function addFriendCall(){
var el = $('friendinput');
if(!el || el.value == "")	return;
var s = '<input type="checkbox" name="fusername[]" value="'+el.value+'" id="'+el.value+'" checked>';
s += '<label for="'+el.value+'">'+el.value+'</label>';
s += '<br />';
$('friends').innerHTML += s;
el.value = '';
}
resizeImg('blog_article','700');
resizeImg('div_main_content','450');

//彩虹炫
var elems = selector('div[class~=magicflicker]'); 
for(var i=0; i<elems.length; i++){
magicColor(elems[i]);
}

-->
</script>
</div>
<div id="vs4con_b"><p><img src="../template/vicstyle4/image/con_b_l.gif" /></p></div>
</div>
<!--/mainarea-->
</div>
<!--/main-->
<div id="footer">

<p class="r_option">
<a href="javascript:;" onclick="window.scrollTo(0,0);" id="a_top" title="TOP"><img src="../image/top.gif" alt="" style="padding: 5px 6px 6px;" /></a>
</p>


<p>
舍内网 - 
<a href="mailto:service@shenei.net">联系我们</a>
- <script src="../../s9.cnzz.com/stat.phpid2162321web_id2162321" language="JavaScript"></script>
- Design By <a  href="../../e.shenei.net/default.htm" target="_blank"><strong> 小E</strong></a>
</p>
<p>
Powered by <a  href="../../fs.shenei.net/default.htm" target="_blank"><strong>【疯·神】工作室</strong></a> <span title="20100416">2.0</span>
&copy; 2009-2010 <a href="mailto:e5201@126.com" target="_blank">E Inc.</a> </p>


</div>
</div>
<!--/wrap-->

<ul id="ucappmenu_menu" class="dropmenu_drop" style="display:none;">
<li><a href="../../buy.shenei.net/default.htm" title="舍内团秒" target="_blank">舍内团秒</a></li>
<li><a href="../../shop.shenei.net/default.htm" title="免费开店" target="_blank">免费开店</a></li>
<li><a href="../../xx.shenei.net/default.htm" title="舍内知天下" target="_blank">舍内知天下</a></li>
</ul>

<ul id="membernotemenu_menu" class="dropmenu_drop" style="display:none;width:auto;">
</ul>


</body>
</html>
